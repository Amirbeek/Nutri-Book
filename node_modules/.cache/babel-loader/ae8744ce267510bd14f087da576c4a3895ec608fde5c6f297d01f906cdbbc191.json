{"ast":null,"code":"import axios from \"axios\";\nconst backendUrl = 'http://localhost:8080/api';\nexport async function findUserByEmail(token, user) {\n  const url = backendUrl + '/user/find-by-email/' + user;\n  const method = \"GET\";\n  const headers = {\n    'Authorization': token\n  };\n  try {\n    const response = await axios({\n      method: method,\n      url: url,\n      headers: headers\n    });\n    return {\n      response,\n      error: ''\n    };\n  } catch (error) {\n    console.log(error);\n    return {\n      response: '',\n      error\n    };\n  }\n}\nexport async function handleDeleteActiveAccount(password, id, token) {\n  const data = {\n    oldPassword: password\n  };\n  const url = backendUrl + '/user/delete-account/' + id;\n  const method = \"DELETE\";\n  const config = {\n    'Authorization': token\n  };\n  return handleBackendChangeCall(url, data, config);\n}\nexport async function handleUsernameChange(username, password, id, token) {\n  const data = {\n    newUsername: username,\n    oldPassword: password\n  };\n  const url = backendUrl + '/user/change-username/' + id;\n  const config = {\n    'Authorization': token\n  };\n  return handleBackendChangeCall(url, data, config);\n}\nexport async function handleNewPasswordChange(newPassword, oldPassword, id, token) {\n  const data = {\n    newPassword,\n    oldPassword\n  };\n  const url = backendUrl + '/user/change-password/' + id;\n  const config = {\n    Authorization: token\n  };\n  return handleBackendChangeCall(url, data, config);\n}\nexport async function handleEmailChange(newEmail, oldPassword, id, token) {\n  const data = {\n    newEmail,\n    oldPassword\n  };\n  const url = backendUrl + '/user/change-email/' + id;\n  const config = {\n    Authorization: token\n  };\n  return handleBackendChangeCall(url, data, config);\n}\nexport async function handleRecoveryCall(email) {\n  const data = {\n    email\n  };\n  const url = backendUrl + `/user/recovery`;\n  const method = \"POST\";\n  return handleBackendCall(data, url, method);\n}\nexport async function handleSignInCall(email, password) {\n  const data = {\n    \"username\": email,\n    password\n  };\n  const url = backendUrl + `/user/login`;\n  const method = \"POST\";\n  return handleBackendCall(data, url, method);\n}\nexport async function handleSignUpCall(email, username, password) {\n  const data = {\n    email,\n    username,\n    password\n  };\n  const url = backendUrl + `/user/register`;\n  const method = \"POST\";\n  return handleBackendCall(data, url, method);\n}\nasync function handleBackendCall(data, url, method) {\n  try {\n    const response = await axios({\n      method: method,\n      data: data,\n      url: url\n    });\n    return {\n      response,\n      error: ''\n    };\n  } catch (error) {\n    console.log(error.data);\n    return {\n      response: \"\",\n      error\n    };\n  }\n}\nasync function handleBackendChangeCall(url, data, config) {\n  console.log(\"URL: \", url);\n  console.log(\"DATA: \", data);\n  console.log(\"CONFIG: \", config);\n  try {\n    const response = await axios({\n      // This should REALLY REALLY REALLY be a PUT mapping,\n      // but PUT doesnt want to work and changing to POST allows it to work\n      // spent too much time on this to really want.\n      // PUT mapping gave me a generic \"axios network error\"\n      // and no one seems to know how to fix it so this is staying.\n      // and no one seems to know how to fix it so this is staying.\n      method: \"POST\",\n      data: data,\n      url: url,\n      headers: config\n    });\n    console.log(response);\n    return {\n      response,\n      error: \"\"\n    };\n  } catch (error) {\n    if (error.response) {\n      console.log(\"RESPONSE STATUS: \", error.response.status);\n      console.log(\"RESPONSE: \", error.response);\n      console.log(\"HEADERS: \", error.headers);\n      console.log(\"DATA: \", error.response.data);\n    } else if (error.request) {\n      console.log(\"REQUEST: \", error.request);\n    }\n    console.log(\"CONFIG: \", error.config);\n    return {\n      response: \"\",\n      error\n    };\n  }\n}","map":{"version":3,"names":["axios","backendUrl","findUserByEmail","token","user","url","method","headers","response","error","console","log","handleDeleteActiveAccount","password","id","data","oldPassword","config","handleBackendChangeCall","handleUsernameChange","username","newUsername","handleNewPasswordChange","newPassword","Authorization","handleEmailChange","newEmail","handleRecoveryCall","email","handleBackendCall","handleSignInCall","handleSignUpCall","status","request"],"sources":["/Users/amirbekshomurodov/Documents/GitHub/cs2001-2023-24-group-49-1/src/utilities/BackendService.jsx"],"sourcesContent":["import axios from \"axios\";\n\nconst backendUrl = 'http://localhost:8080/api';\n\nexport async function findUserByEmail(token, user) {\n    const url = backendUrl + '/user/find-by-email/' + user;\n    const method = \"GET\";\n    const headers = {'Authorization': token};\n    try {\n        const response = await axios({\n            method: method,\n            url: url,\n            headers: headers\n        });\n        return {response, error: ''};\n    } catch (error) {\n        console.log(error);\n        return {response: '', error}\n    }\n}\n\nexport async function handleDeleteActiveAccount(password, id, token) {\n    const data = {oldPassword: password};\n    const url = backendUrl + '/user/delete-account/' + id;\n    const method = \"DELETE\";\n    const config = {'Authorization': token}\n    return handleBackendChangeCall(url, data, config);\n}\n\nexport async function handleUsernameChange(username, password, id, token) {\n    const data = {newUsername: username, oldPassword: password};\n    const url = backendUrl + '/user/change-username/' + id;\n    const config = {\n        'Authorization': token\n    }\n    return handleBackendChangeCall(url, data, config);\n}\n\nexport async function handleNewPasswordChange(newPassword, oldPassword, id, token) {\n    const data = {newPassword, oldPassword};\n    const url = backendUrl + '/user/change-password/' + id;\n    const config = {\n        Authorization: token\n    }\n    return handleBackendChangeCall(url, data, config);\n}\n\nexport async function handleEmailChange(newEmail, oldPassword, id, token) {\n    const data = {newEmail, oldPassword};\n    const url = backendUrl + '/user/change-email/' + id\n    const config = {\n        Authorization: token\n    };\n    return handleBackendChangeCall(url, data, config);\n}\n\n\nexport async function handleRecoveryCall(email) {\n    const data = {email};\n    const url = backendUrl + `/user/recovery`;\n    const method = \"POST\";\n\n    return handleBackendCall(data, url, method)\n}\n\nexport async function handleSignInCall(email, password) {\n    const data = {\"username\": email, password};\n    const url = backendUrl + `/user/login`;\n    const method = \"POST\";\n\n    return handleBackendCall(data, url, method);\n}\n\nexport async function handleSignUpCall(email, username, password) {\n    const data = {email, username, password};\n    const url = backendUrl + `/user/register`\n    const method = \"POST\";\n\n    return handleBackendCall(data, url, method)\n}\n\nasync function handleBackendCall(data, url, method) {\n    try {\n        const response = await axios({\n            method: method,\n            data: data,\n            url: url\n        });\n        return {response, error: ''};\n    } catch (error) {\n        console.log(error.data);\n        return {response: \"\", error};\n    }\n\n\n}\n\nasync function handleBackendChangeCall(url, data, config) {\n    console.log(\"URL: \", url);\n    console.log(\"DATA: \", data);\n    console.log(\"CONFIG: \", config);\n    try{\n        const response = await axios({\n            // This should REALLY REALLY REALLY be a PUT mapping,\n            // but PUT doesnt want to work and changing to POST allows it to work\n            // spent too much time on this to really want.\n            // PUT mapping gave me a generic \"axios network error\"\n            // and no one seems to know how to fix it so this is staying.\n            // and no one seems to know how to fix it so this is staying.\n            method: \"POST\",\n            data: data,\n            url: url,\n            headers: config\n        });\n        console.log(response);\n        return {response, error: \"\"};\n    } catch(error) {\n        if (error.response){\n            console.log(\"RESPONSE STATUS: \", error.response.status);\n            console.log(\"RESPONSE: \", error.response);\n            console.log(\"HEADERS: \", error.headers);\n            console.log(\"DATA: \", error.response.data);\n        } else if (error.request){\n            console.log(\"REQUEST: \", error.request);\n        }\n        console.log(\"CONFIG: \", error.config);\n        return {response: \"\", error};\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}